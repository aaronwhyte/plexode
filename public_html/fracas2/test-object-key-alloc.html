<!DOCTYPE html>
<html>
<head>
<title>test object key alloc</title>
<script>
var iterations = 0;
var totalTime = 0;
var obj = {};
var highKey = 0;
var lowKey = 1;
var foo = {"key" : "val"};
var log = [];
function clear() {
  for (var i = lowKey; i <= highKey; i++) {
    delete obj[i];
  }
  lowKey = highKey + 1;
}
function iterate() {
  var t0 = (new Date()).getTime();
  clear();
  for (var i = 0; i < 100000; i++) {
    obj[++highKey] = foo;
  }
  t1 = (new Date()).getTime();
  console.log(t1 - t0);
}

setInterval("iterate()", 1000/60);
</script>
</head>
<body>
x
</body>
</html>
