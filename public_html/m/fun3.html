<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>fun3</title>
<script>

function log(html) {
  document.getElementById('log').innerHTML = html;
}

function timeout() {
  x += dx;
  y += dy;
  dx = dx * 0.5;
  dy = dy * 0.5;
  as.left = x + 'px';
  as.top = y + 'px';
  setTimeout(timeout, 100);
}

function listen(element, eventName, fn) {
  if (element.addEventListener) {
    // DOM Level 2
    element.addEventListener(eventName, fn, false);
  } else if (element.attachEvent) {
    // IE
    element.attachEvent('on' + eventName, fn);
  }
}

function $(id) {
  return document.getElementById(id);
}

function start() {
  window.scrollTo(cx, cy);
  as = $('abs').style;
  timeout();
  listen(window, 'scroll', function(e){shift(e)}, false);
}

function shift(e) {
  dx += (window.scrollX - cx) * -1;
  dy += (window.scrollY - cy) * -1;
  window.scrollTo(cx, cy);
  //log(dx + ', ' + dy);
}

var cx = 1000;
var cy = 1000;
var dx = 0;
var dy = 0;
var x = 1100;
var y = 1100;
var as;
</script>
</head>
<body onload="start()">
<!--div id="log" style="position:fixed; top:50px; left:50px">log</div-->
<div style="border:1px dashed red; width:2000px; height:2000px;">scroller</div>
<div id="abs" style="
  position:absolute; top:1100px; left:1100px; 
  height:20px; width:20px; background:red">@</div>
</body>
</html>
