<!DOCTYPE HTML>
<html>
<head>
<title>plex.lempelziv test</title>
<script src="../../../public_html/js/testing.js"></script>
<script src="../../../public_html/js/util.js"></script>
<script src="../../../public_html/js/plex/bitqueue.js"></script>
<script src="../../../public_html/js/plex/map.js"></script>
<script src="../../../public_html/js/plex/string.js"></script>

  <script src="../../../public_html/js/plex/lempelziv.js"></script>
<script>

function testNumberEncoding(str, alphabet) {
  var lz = new plex.LempelZiv(alphabet);
  var ints = lz.encodeToIntegers(str);
  var str2 = lz.decodeFromIntegers(ints);
  assertEquals(str, str2);
}

addTest(function shortNumbers() {
  testNumberEncoding('b', 'ab');
});

addTest(function abababaNumbers() {
  testNumberEncoding('abababa', 'ab');
});

addTest(function longerNumbers() {
  testNumberEncoding(
      'caaababababccccacacacbacbacabcbcbcacbabcaabababbb' +
          'ccbcbcbcababcabacbcbcccbcabcabababcabcacacabcabcbcaba',
      'abcdefghijklmnopqrstuvwxyz');
});

addTest(function emptyStringNumbers() {
  testNumberEncoding('', 'abcdefghijklmnopqrstuvwxyz');
});


function testBitQueueEncoding(str, alphabet) {
  var lz = new plex.LempelZiv(alphabet);
  var bits = lz.encodeToBitQueue(str);
  var str2 = lz.decodeFromBitQueue(bits);
  assertEquals(str, str2);
}

addTest(function shortBitQueue() {
  testBitQueueEncoding('b', 'ab');
});

addTest(function abababaBitQueue() {
  testBitQueueEncoding('abababa', 'ab');
});

addTest(function longerBitQueue() {
  testBitQueueEncoding(
      'caaababababccccacacacbacbacabcbcbcacbabcaabababbb' +
          'ccbcbcbcababcabacbcbcccbcabcabababcabcacacabcabcbcaba',
      'abcdefghijklmnopqrstuvwxyz');
});

addTest(function emptyStringBitQueue() {
  testBitQueueEncoding('', 'abcdefghijklmnopqrstuvwxyz');
});

</script>
</head>
<body onload="runTests()"></body>
</html>
